(function(a){"use strict";function b(){this.events={}}var c=b.prototype;c.listeners=function(a){var b=this.events[a];return b||(b=this.events[a]=[]),b},c.on=function(a,b,c){if(!b)return this;var d=this.listeners(a),e=d.map(function(a){return a.callback}).indexOf(b);return-1===e&&d.push({callback:b,once:Boolean(c)}),this},c.once=function(a,b){return this.on(a,b,!0)},c.off=function(a,b){var c=this.listeners(a);if(b){var d=c.map(function(a){return a.callback}).indexOf(b);-1!==d&&c.splice(d,1)}else c=[];return this},c.clear=function(){for(var a,b=Object.keys(this.events),c=0,d=b.length;d>c;c++)a=b[c],delete this.events[a];return this},c.emit=function(a,b){for(var c,d=this.listeners(a),e=[],f=0,g=d.length;g>f;f++)c=d[f],c.callback.apply(this,b||[]),c.once||e.push(c);return this.events[a]=e,this},module&&module.exports?module.exports=b:a.EventEmitter=b}).call(this);